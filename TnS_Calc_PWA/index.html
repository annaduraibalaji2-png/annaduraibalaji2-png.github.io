<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Target & Stop-Loss Calculator</title>

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#121212">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="icon.png">

  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #121212; color: #e0e0e0; margin:0;}
    h2 { text-align:center; color:#fff;}
    label {display:block; margin-top:12px; font-size:16px; color:#bbb;}
    input {padding:10px; margin:8px 0; width:100%; font-size:16px; border:1px solid #333; border-radius:8px; background:#1e1e1e; color:#fff;}
    input:focus {outline:none; border-color:#4caf50; box-shadow:0 0 5px #4caf50;}
    button {width:100%; padding:12px; margin-top:15px; color:white; border:none; border-radius:8px; font-size:16px; font-weight:bold; cursor:pointer; background:#2196f3;}
    button:hover {background:#1976d2;}
    .result {margin-top:25px; text-align:center;}
    .stoploss {color:#ff5252; font-size:22px; font-weight:bold; margin-bottom:15px;}
    .target {color:#4caf50; font-size:22px; font-weight:bold;}
    .diff {font-size:13px; color:#888;}
  </style>
</head>
<body>
  <h2>ðŸŽ¯ Target & Stop-Loss Calculator</h2>

  <label for="x">Lot Size:</label>
  <input type="number" id="x" placeholder="Enter Lot Size" oninput="calculate()">

  <label for="y">LTP:</label>
  <input type="number" id="y" placeholder="Enter LTP" oninput="calculate()">

  <button onclick="resetCalc()">Reset</button>

  <div class="result">
    <div id="stoploss" class="stoploss">Stop-Loss = â€“</div>
    <div id="target" class="target">Target = â€“</div>
  </div>

  <script>
    function calculate() {
      let lot = parseFloat(document.getElementById("x").value);
      let ltp = parseFloat(document.getElementById("y").value);
      if (isNaN(lot) || isNaN(ltp) || lot === 0) {
        document.getElementById("stoploss").innerHTML = "Stop-Loss = â€“";
        document.getElementById("target").innerHTML = "Target = â€“";
        return;
      }
      let v = 1000 / lot;
      let stoploss = ltp - v * 2;
      let target = ltp + v * 1;

      let stopDiff = (ltp - stoploss).toFixed(2);
      let targetDiff = (target - ltp).toFixed(2);

      let stopPct = ((stopDiff / ltp) * 100).toFixed(2);
      let targetPct = ((targetDiff / ltp) * 100).toFixed(2);

      document.getElementById("stoploss").innerHTML = `Stop-Loss = ${stoploss.toFixed(2)} <span class="diff">(âˆ’ ${stopDiff} | âˆ’${stopPct}%)</span>`;
      document.getElementById("target").innerHTML = `Target = ${target.toFixed(2)} <span class="diff">(+ ${targetDiff} | +${targetPct}%)</span>`;
    }

    function resetCalc() {
      document.getElementById("x").value = "";
      document.getElementById("y").value = "";
      document.getElementById("stoploss").innerHTML = "Stop-Loss = â€“";
      document.getElementById("target").innerHTML = "Target = â€“";
    }

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js').then(() => console.log('Service Worker Registered'));
    }
  </script>
</body>
</html>
